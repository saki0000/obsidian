# Androidのスレッド
Androidはシングルスレッドモデル
	-> 処理を行うためのベルトコンベア(スレッド)が一本しか存在しない。
### 流れ
![[Pasted image 20240516212704.png]]
### メインスレッド
メインスレッドとは、イベント（描画イベントを含む）を適切なユーザーインターフェースウィジェットに送信する役割を担うスレッド
- UIスレッドとも呼ばれる
- アプリがコンポーネントとやり取りをし、UI更新やボタンのクリックなどのUIの操作を行う
### サブスレッド
サブスレッドとは、重い処理が走った際にアプリが止まらないように一時的に処理を行うスレッド。
- ワーカースレッドとも呼ばれる
- APIなどの重い処理を行う
- Android UIは[[スレッドセーフ]]ではないためUIの操作は行わない
### Androidのスレッドのルール
- UIスレッドをブロックしない
- UIスレッド以外からAndroid UIツールキットにアクセスしない

## スレッドの作成
## handler
Handlerとは、ワーカースレッドからUIスレッドにUIの操作を指示するのに使用される仕組み。
- HandlerはAndroidが提供するライブラリ
- HandlerはLooperへリストを登録したり、Looperとやりとりを行う
#### Looper
Looperとは、処理対象のリストを保持し、そこに登録されたスレッドを順番に実行する
#### Runnable
`Runnable`は別スレッドを作成するインターフェース
- `run()`をオーバーライドして処理を定義
```
// Handlerのオブジェクト作成
val handler = Handler(Looper.getMainLooper())

// 別スレッドを作成
val runnable = object : Runnable {
    override fun run() {
        // 別スレッドで行う処理
    }
}

// 別スレッドを実行
handler.post(runnable)
```